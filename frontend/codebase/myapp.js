!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/codebase/",n(n.s=69)}([function(e,t,n){"use strict";n.d(t,"d",(function(){return q})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return v}));var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function e(){a(this,e)},c=function(){function e(t){a(this,e),this.webixJet=!0,this.webix=t,this._events=[],this._subs={},this._data={}}return e.prototype.getRoot=function(){return this._root},e.prototype.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},e.prototype.setParam=function(e,t,n){if(this._data[e]!==t&&(this._data[e]=t,this._segment.update(e,t,0),n))return this.show(null)},e.prototype.getParam=function(e,t){var n=this._data[e];if(void 0!==n||!t)return n;var o=this.getParentView();return o?o.getParam(e,t):void 0},e.prototype.getUrl=function(){return this._segment.suburl()},e.prototype.getUrlString=function(){return this._segment.toString()},e.prototype.getParentView=function(){return this._parent},e.prototype.$$=function(e){if("string"==typeof e){var t=this.getRoot();return t.queryView((function(n){return(n.config.id===e||n.config.localId===e)&&n.$scope===t.$scope}),"self")}return e},e.prototype.on=function(e,t,n){var o=e.attachEvent(t,n);return this._events.push({obj:e,id:o}),o},e.prototype.contains=function(e){for(var t in this._subs){var n=this._subs[t].view;if(n===e||n.contains(e))return!0}return!1},e.prototype.getSubView=function(e){var t=this.getSubViewInfo(e);if(t)return t.subview.view},e.prototype.getSubViewInfo=function(e){var t=this._subs[e||"default"];return t?{subview:t,parent:this}:"_top"===e?(this._subs[e]={url:"",id:null,popup:!0},this.getSubViewInfo(e)):this._parent?this._parent.getSubViewInfo(e):null},e.prototype._detachEvents=function(){for(var e=this._events,t=e.length-1;t>=0;t--)e[t].obj.detachEvent(e[t].id)},e.prototype._destroySubs=function(){for(var e in this._subs){var t=this._subs[e].view;t&&t.destructor()}this._subs={}},e.prototype._init_url_data=function(){var e=this._segment.current();this._data={},this.webix.extend(this._data,e.params,!0)},e.prototype._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var e in this._subs){var t=this._subs[e];if(!t.branch&&t.view&&"_top"!==e){var n=t.view._getDefaultSub();if(n)return n}}},e.prototype._routed_view=function(){var e=this.getParentView();if(!e)return!0;var t=e._getDefaultSub();return!(!t&&t!==this)&&e._routed_view()},e}();function u(e){"/"===e[0]&&(e=e.substr(1));for(var t=e.split("/"),n=[],o=0;o<t.length;o++){var r=t[o],i={},a=r.indexOf(":");if(-1===a&&(a=r.indexOf("?")),-1!==a){var s=r.substr(a+1).split(/[\:\?\&]/g),c=Array.isArray(s),u=0;for(s=c?s:s[Symbol.iterator]();;){var l;if(c){if(u>=s.length)break;l=s[u++]}else{if((u=s.next()).done)break;l=u.value}var p=l.split("=");i[p[0]]=decodeURIComponent(p[1])}}n[o]={page:a>-1?r.substr(0,a):r,params:i,isNew:!0}}return n}function l(e){var t=[],n=e,o=Array.isArray(n),r=0;for(n=o?n:n[Symbol.iterator]();;){var i;if(o){if(r>=n.length)break;i=n[r++]}else{if((r=n.next()).done)break;i=r.value}var a=i;t.push("/"+a.page);var s=p(a.params);s&&t.push("?"+s)}return t.join("")}function p(e){var t=[];for(var n in e)t.length&&t.push("&"),t.push(n+"="+encodeURIComponent(e[n]));return t.join("")}var f=function(){function e(t,n){a(this,e),this._next=1,this.route="string"==typeof t?{url:u(t),path:t}:t,this.index=n}return e.prototype.current=function(){return this.route.url[this.index]},e.prototype.next=function(){return this.route.url[this.index+this._next]},e.prototype.suburl=function(){return this.route.url.slice(this.index)},e.prototype.shift=function(){return new e(this.route,this.index+this._next)},e.prototype.refresh=function(){for(var e=this.route.url,t=this.index+1;t<e.length;t++)e[t].isNew=!0},e.prototype.toString=function(){var e=l(this.suburl());return e?e.substr(1):""},e.prototype._join=function(e,t){var n=this.route.url;if(null===e)return n;var o=this.route.url;if(n=o.slice(0,this.index+(t?this._next:0)),e){n=n.concat(u(e));for(var r=0;r<n.length;r++)o[r]&&(n[r].view=o[r].view),o[r]&&n[r].page===o[r].page&&(n[r].isNew=!1)}return n},e.prototype.append=function(e){var t=this._join(e,!0);return this.route.path=l(t),this.route.url=t,this.route.path},e.prototype.show=function(e,t,n){var o=this,r=this._join(e,n);return new Promise((function(e,n){var i=l(r),a={url:r,redirect:i,confirm:Promise.resolve()},c=t?t.app:null;if(c&&!c.callEvent("app:guard",[a.redirect,t,a]))return void n(new s);a.confirm.catch((function(e){return n(e)})).then((function(){if(null!==a.redirect){if(a.redirect!==i)return c.show(a.redirect),void n(new s);o.route.path=i,o.route.url=r,e()}else n(new s)}))}))},e.prototype.size=function(e){this._next=e},e.prototype.split=function(){var t={url:this.route.url.slice(this.index+1),path:""};return t.url.length&&(t.path=l(t.url)),new e(t,0)},e.prototype.update=function(e,t,n){var o=this.route.url[this.index+(n||0)];if(!o)return this.route.url.push({page:"",params:{}}),this.update(e,t,n);""===e?o.page=t:o.params[e]=t,this.route.path=l(this.route.url)},e}(),h=function(e){function t(n,o){a(this,t);var i=r(this,e.call(this,n.webix));return i.app=n,i._children=[],i}return i(t,e),t.prototype.ui=function(e,t){var n=(t=t||{}).container||e.container,r=this.app.createView(e);return this._children.push(r),r.render(n,this._segment,this),"object"!==(void 0===e?"undefined":o(e))||e instanceof c?r:r.getRoot()},t.prototype.show=function(e,t){if(t=t||{},"object"===(void 0===e?"undefined":o(e))){for(var n in e)this.setParam(n,e[n]);e=null}else{if("/"===e.substr(0,1))return this.app.show(e);if(0===e.indexOf("./")&&(e=e.substr(2)),0===e.indexOf("../")){var r=this.getParentView();return r?r.show(e.substr(3),t):this.app.show("/"+e.substr(3))}var i=this.getSubViewInfo(t.target);if(i){if(i.parent!==this)return i.parent.show(e,t);if(t.target&&"default"!==t.target)return this._renderFrameLock(t.target,i.subview,e)}else if(e)return this.app.show("/"+e)}return this._show(this._segment,e,this)},t.prototype._show=function(e,t,n){var o=this;return e.show(t,n,!0).then((function(){return o._init_url_data(),o._urlChange()})).then((function(){e.route.linkRouter&&(o.app.getRouter().set(e.route.path,{silent:!0}),o.app.callEvent("app:route",[e.route.path]))}))},t.prototype.init=function(e,t){},t.prototype.ready=function(e,t){},t.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},t.prototype.urlChange=function(e,t){},t.prototype.destroy=function(){},t.prototype.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),e.prototype.destructor.call(this)},t.prototype.use=function(e,t){e(this.app,this,t)},t.prototype.refresh=function(){this.getUrl();return this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},t.prototype.render=function(e,t,n){var o=this;"string"==typeof t&&(t=new f(t,0)),this._segment=t,this._parent=n,this._init_url_data();var r="string"==typeof(e=e||document.body)?this.webix.toNode(e):e;return this._container!==r?(this._container=r,this._render(t)):this._urlChange().then((function(){return o.getRoot()}))},t.prototype._render=function(e){var t=this,n=this.config();return n.then?n.then((function(n){return t._render_final(n,e)})):this._render_final(n,e)},t.prototype._render_final=function(e,t){var n=this,o=null,r=null,i=!1;if(this._container.tagName?r=this._container:(o=this._container).popup?(r=document.body,i=!0):r=this.webix.$$(o.id),!this.app||!r)return Promise.reject(null);var a=void 0,s=this._segment.current(),c={ui:{}};this.app.copyConfig(e,c.ui,this._subs),this.app.callEvent("app:render",[this,t,c]),c.ui.$scope=this,!o&&s.isNew&&s.view&&s.view.destructor();try{if(o&&!i){var u=r,l=u.getParentView();l&&"multiview"===l.name&&!c.ui.id&&(c.ui.id=u.config.id)}this._root=this.app.webix.ui(c.ui,r);var p=this._root;i&&p.setPosition&&!p.isVisible()&&p.show(),o&&(o.view&&o.view!==this&&o.view!==this.app&&o.view.destructor(),o.id=this._root.config.id,this.getParentView()||!this.app.app?o.view=this:o.view=this.app),s.isNew&&(s.view=this,s.isNew=!1),a=Promise.resolve(this._init(this._root,t)).then((function(){return n._urlChange().then((function(){return n._initUrl=null,n.ready(n._root,t.suburl())}))}))}catch(e){a=Promise.reject(e)}return a.catch((function(e){return n._initError(n,e)}))},t.prototype._init=function(e,t){return this.init(e,t.suburl())},t.prototype._urlChange=function(){var e=this;this.app.callEvent("app:urlchange",[this,this._segment]);var t=[];for(var n in this._subs){var o=this._subs[n],r=this._renderFrameLock(n,o,null);r&&t.push(r)}return Promise.all(t).then((function(){return e.urlChange(e._root,e._segment.suburl())}))},t.prototype._renderFrameLock=function(e,t,n){if(!t.lock){var o=this._renderFrame(e,t,n);o&&(t.lock=o.then((function(){return t.lock=null}),(function(){return t.lock=null})))}return t.lock},t.prototype._renderFrame=function(e,t,n){var o=this;if("default"===e){if(this._segment.next())return this._createSubView(t,this._segment.shift());t.view&&t.popup&&(t.view.destructor(),t.view=null)}if(null!==n&&(t.url=n),t.route){if(null!==n)return t.route.show(n,t.view).then((function(){return o._createSubView(t,t.route)}));if(t.branch)return}var r=t.view;if(!r&&t.url){if("string"==typeof t.url)return t.route=new f(t.url,0),this._createSubView(t,t.route);"function"!=typeof t.url||r instanceof t.url||(r=new t.url(this.app,"")),r||(r=t.url)}if(r)return r.render(t,t.route||this._segment,this)},t.prototype._initError=function(e,t){return this.app&&this.app.error("app:error:initview",[t,e]),!0},t.prototype._createSubView=function(e,t){var n=this;return this.app.createFromURL(t.current()).then((function(o){return o.render(e,t,n)}))},t.prototype._destroyKids=function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t]&&e[t].destructor&&e[t].destructor();this._children=[]},t}(c),d=function(e){function t(n,o){a(this,t);var i=r(this,e.call(this,n,o));return i._ui=o.ui,i}return i(t,e),t.prototype.config=function(){return this._ui},t}(h),b=function(){function e(t,n,o){a(this,e),this.path="",this.app=o}return e.prototype.set=function(e,t){this.path=e;var n=this.app;n.app.getRouter().set(n._segment.append(this.path),{silent:!0})},e.prototype.get=function(){return this.path},e}(),y=!0,w=function(e){function t(n){a(this,t);var o=(n||{}).webix||window.webix,i=r(this,e.call(this,o));return i.config=i.webix.extend({name:"App",version:"1.0",start:"/home"},n,!0),i.app=i.config.app,i.ready=Promise.resolve(),i._services={},i.webix.extend(i,i.webix.EventSystem),i}return i(t,e),t.prototype.getUrl=function(){return this._subSegment.suburl()},t.prototype.getUrlString=function(){return this._subSegment.toString()},t.prototype.getService=function(e){var t=this._services[e];return"function"==typeof t&&(t=this._services[e]=t(this)),t},t.prototype.setService=function(e,t){this._services[e]=t},t.prototype.destructor=function(){this.getSubView().destructor(),e.prototype.destructor.call(this)},t.prototype.copyConfig=function(e,t,n){if((e instanceof c||"function"==typeof e&&e.prototype instanceof c)&&(e={$subview:e}),void 0!==e.$subview)return this.addSubView(e,t,n);for(var r in t=t||(e instanceof Array?[]:{}),e){var i=e[r];if("function"==typeof i&&i.prototype instanceof c&&(i={$subview:i}),!i||"object"!==(void 0===i?"undefined":o(i))||i instanceof this.webix.DataCollection||i instanceof RegExp)t[r]=i;else if(i instanceof Date)t[r]=new Date(i);else{var a=this.copyConfig(i,i instanceof Array?[]:{},n);null!==a&&(t[r]=a)}}return t},t.prototype.getRouter=function(){return this.$router},t.prototype.clickHandler=function(e,t){if(e&&(t=t||e.target||e.srcElement)&&t.getAttribute){var n=t.getAttribute("trigger");if(n)return this._forView(t,(function(e){return e.app.trigger(n)})),e.cancelBubble=!0,e.preventDefault();var o=t.getAttribute("route");if(o)return this._forView(t,(function(e){return e.show(o)})),e.cancelBubble=!0,e.preventDefault()}var r=t.parentNode;r&&this.clickHandler(e,r)},t.prototype.getRoot=function(){return this.getSubView().getRoot()},t.prototype.refresh=function(){var e=this;return this._subSegment?this.getSubView().refresh().then((function(t){return e.callEvent("app:route",[e.getUrl()]),t})):Promise.resolve(null)},t.prototype.loadView=function(e){var t=this,n=this.config.views,o=null;if(""===e)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{n&&"string"==typeof(o="function"==typeof n?n(e):n[e])&&(e=o,o=null),o||(o="_blank"===e?{}:this._loadViewDynamic(e))}catch(t){o=this._loadError(e,t)}return o.then||(o=Promise.resolve(o)),o=o.then((function(e){return e.__esModule?e.default:e})).catch((function(n){return t._loadError(e,n)}))},t.prototype._forView=function(e,t){var n=this.webix.$$(e);n&&t(n.$scope)},t.prototype._loadViewDynamic=function(e){return null},t.prototype.createFromURL=function(e){var t=this;return e.isNew||!e.view?this.loadView(e.page).then((function(e){return t.createView(e,name)})):Promise.resolve(e.view)},t.prototype.createView=function(e,n){if("function"==typeof e){if(e.prototype instanceof t)return new e({app:this,name:n,router:b});if(e.prototype instanceof c)return new e(this,{name:n});e=e(this)}return e instanceof c?e:new d(this,{name:n,ui:e})},t.prototype.show=function(e){return this.render(this._container,e||this.config.start)},t.prototype.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this.apply(e,n)},t.prototype.apply=function(e,t){this.callEvent(e,t)},t.prototype.action=function(e){return this.webix.bind((function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];this.apply(e,n)}),this)},t.prototype.on=function(e,t){this.attachEvent(e,t)},t.prototype.use=function(e,t){e(this,null,t)},t.prototype.error=function(e,t){if(this.callEvent(e,t),this.callEvent("app:error",t),this.config.debug)for(var n=0;n<t.length;n++)if(console.error(t[n]),t[n]instanceof Error){var o=t[n].message;0===o.indexOf("Module build failed")?(o=o.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+o+"</pre>"):(o+="<br><br>Check console for more details",this.webix.message({type:"error",text:o,expire:-1}))}},t.prototype.render=function(e,t,n){var o=this;this._container="string"==typeof e?this.webix.toNode(e):e||document.body;var r=null;!this.$router?(y&&"tagName"in this._container&&(this.webix.event(document.body,"click",(function(e){return o.clickHandler(e)})),y=!1),"string"==typeof t&&(t=new f(t,0)),this._subSegment=this._first_start(t),this._subSegment.route.linkRouter=!0):r="string"==typeof t?t:this.app?t.split().route.path||this.config.start:t.toString();var i=this.getSubView(),a=this._subSegment,s=a.show(r,i).then((function(){return o.createFromURL(a.current())})).then((function(t){return t.render(e,a)})).then((function(e){return o.$router.set(a.route.path,{silent:!0}),o.callEvent("app:route",[o.getUrl()]),e}));return this.ready=this.ready.then((function(){return s})),s},t.prototype.getSubView=function(){if(this._subSegment){var e=this._subSegment.current().view;if(e)return e}return new h(this,{})},t.prototype._first_start=function(e){var t=this;this._segment=e;if(this.$router=new this.config.router((function(e){return setTimeout((function(){t.show(e).catch((function(e){if(!(e instanceof s))throw e}))}),1)}),this.config,this),this._container===document.body&&!1!==this.config.animation){var n=this._container;this.webix.html.addCss(n,"webixappstart"),setTimeout((function(){t.webix.html.removeCss(n,"webixappstart"),t.webix.html.addCss(n,"webixapp")}),10)}if(e)this.app&&(e.current().view=this,e.next()?(e.refresh(),e=e.split()):e=new f(this.config.start,0));else{var o=this.$router.get();o||(o=this.config.start,this.$router.set(o,{silent:!0})),e=new f(o,0)}return e},t.prototype._loadError=function(e,t){return this.error("app:error:resolve",[t,e]),{template:" "}},t.prototype.addSubView=function(e,t,n){var o=!0!==e.$subview?e.$subview:null,r=e.name||(o?this.webix.uid():"default");return t.id=e.id||"s"+this.webix.uid(),(n[r]={id:t.id,url:o,branch:e.branch,popup:e.popup}).popup?null:t},t}(c),v=function(){function e(t,n){var o=this;a(this,e),this.config=n||{},this._detectPrefix(),this.cb=t,window.onpopstate=function(){return o.cb(o.get())}}return e.prototype.set=function(e,t){var n=this;if(this.config.routes){var o=e.split("?",2);for(var r in this.config.routes)if(this.config.routes[r]===o[0]){e=r+(o.length>1?"?"+o[1]:"");break}}this.get()!==e&&window.history.pushState(null,null,this.prefix+this.sufix+e),t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){var e=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(e="/"!==e&&"#"!==e?e:"",this.config.routes){var t=e.split("?",2),n=this.config.routes[t[0]];n&&(e=n+(t.length>1?"?"+t[1]:""))}return e},e.prototype._detectPrefix=function(){var e=this.config.routerPrefix;this.sufix="#"+(void 0===e?"!":e),this.prefix=document.location.href.split("#",2)[0]},e.prototype._getRaw=function(){return document.location.href},e}(),g=!1;function m(e){if(!g&&e){g=!0;var t=window;t.Promise||(t.Promise=e.promise);var n=e.version.split(".");10*n[0]+1*n[1]<53&&(e.ui.freeze=function(t){var n=t();return n&&n.then?n.then((function(t){return e.ui.$freeze=!1,e.ui.resize(),t})):(e.ui.$freeze=!1,e.ui.resize()),n});var r=e.ui.baselayout.prototype.addView,i=e.ui.baselayout.prototype.removeView,a={addView:function(e,t){var n=this;if(!this.$scope||!this.$scope.webixJet||e.queryView)return r.apply(this,arguments);var i=function(){var o=n.$scope,i={};e=o.app.copyConfig(e,{},i),r.apply(n,[e,t]);var a=function(e){o._renderFrame(e,i[e],null).then((function(){o._subs[e]=i[e]}))};for(var s in i)a(s);return{v:e.id}}();return"object"===(void 0===i?"undefined":o(i))?i.v:void 0},removeView:function(){if(i.apply(this,arguments),this.$scope&&this.$scope.webixJet){var t=this.$scope._subs;for(var n in t){var o=t[n];e.$$(o.id)||(o.view.destructor(),delete t[n])}}}};e.extend(e.ui.layout.prototype,a,!0),e.extend(e.ui.baselayout.prototype,a,!0),e.protoUI({name:"jetapp",$init:function(t){this.$app=new this.app(t);var n=e.uid().toString();for(var o in t.body={id:n},this.$ready.push((function(){this.$app.render({id:n})})),this.$app){var r=this.$app[o];"function"!=typeof r||this[o]||(this[o]=r.bind(this.$app))}}},e.ui.proxy)}}var _=function(e){function t(n){a(this,t),n.router=n.router||v;var o=r(this,e.call(this,n));return m(o.webix),o}return i(t,e),t.prototype._loadViewDynamic=function(e){return e=e.replace(/\./g,"/"),n(66)("./"+e)},t}(w);(function(){function e(t,n,o){a(this,e),this.storage=n.storage||o.webix.storage.session,this.name=n.storeName||n.id+":route",this.cb=t}e.prototype.set=function(e,t){var n=this;this.storage.put(this.name,e),t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){return this.storage.get(this.name)}})(),function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}i(t,e),t.prototype._detectPrefix=function(){this.prefix="",this.sufix=this.config.routerPrefix||""},t.prototype._getRaw=function(){return document.location.pathname+(document.location.search||"")}}(v),function(){function e(t,n){a(this,e),this.path="",this.cb=t}e.prototype.set=function(e,t){var n=this;this.path=e,t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){return this.path}}();function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(e,t,n){for(var o in e)x(e,o)&&t.call(n||e,e[o],o,e)}function j(e){e="Warning: "+e,"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}}var O=String.prototype.replace,k=String.prototype.split,E=function(e){var t=e%10;return 11!==e&&1===t?0:2<=t&&t<=4&&!(e>=12&&e<=14)?1:2},P={arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:E,chinese:function(){return 0},croatian:E,french:function(e){return e>1?1:0},german:function(e){return 1!==e?1:0},russian:E,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},T={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function C(e){var t,n=(t={},S(T,(function(e,n){S(e,(function(e){t[e]=n}))})),t);return n[e]||n[k.call(e,/-/,1)[0]]||n.en}function V(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var R=/\$/g,F=/%\{(.*?)\}/g;function D(e,t,n,o){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var r=e,i=o||F,a="number"==typeof t?{smart_count:t}:t;if(null!=a.smart_count&&r){var s=k.call(r,"||||");r=(s[function(e,t){return P[C(e)](t)}(n||"en",a.smart_count)]||s[0]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return r=O.call(r,i,(function(e,t){return x(a,t)&&null!=a[t]?O.call(a[t],R,"$$"):e}))}function L(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?D:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||j,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if("||||"===t||"||||"===n)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(V(t)+"(.*?)"+V(n),"g")}(t.interpolation)}L.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},L.prototype.extend=function(e,t){S(e,(function(e,n){var r=t?t+"."+n:n;"object"===(void 0===e?"undefined":o(e))?this.extend(e,r):this.phrases[r]=e}),this)},L.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:S(e,(function(e,n){var r=t?t+"."+n:n;"object"===(void 0===e?"undefined":o(e))?this.unset(e,r):delete this.phrases[r]}),this)},L.prototype.clear=function(){this.phrases={}},L.prototype.replace=function(e){this.clear(),this.extend(e)},L.prototype.t=function(e,t){var n,o,r=null==t?{}:t;if("string"==typeof this.phrases[e])n=this.phrases[e];else if("string"==typeof r._)n=r._;else if(this.onMissingKey){o=(0,this.onMissingKey)(e,r,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+e+'"'),o=e;return"string"==typeof n&&(o=D(n,r,this.currentLocale,this.tokenRegex)),o},L.prototype.has=function(e){return x(this.phrases,e)},L.transformPhrase=function(e,t,n){return D(e,t,n)};var $=L;function I(e,t,n){if(t.urls)n=t.urls[n]||n;else if(t.param){var o;(o={})[t.param]=n,n=o}e.show(n)}var M={good:"check",error:"warning",saving:"refresh fa-spin"},U={good:"Ok",error:"Error",saving:"Connecting..."};function A(e,t,n){for(var o=0;o<n.length;o++)e[n[o]]=t[o+1]?t[o+1].page:""}var H=window.webix;H&&m(H);var q={UnloadGuard:function(e,t,n){t.on(e,"app:guard",(function(e,o,r){if(o===t||o.contains(t)){var i=n();r.confirm=!1===i?Promise.reject(new s):r.confirm.then((function(){return i}))}}))},Locale:function(e,t,o){var r=(o=o||{}).storage,i=r?r.get("lang")||"en":o.lang||"en";function a(t,n,a){n.__esModule&&(n=n.default);var s={phrases:n};o.polyglot&&e.webix.extend(s,o.polyglot);var u=c.polyglot=new $(s);if(u.locale(t),c._=e.webix.bind(u.t,u),i=t,r&&r.put("lang",i),o.webix){var l=o.webix[t];l&&e.webix.i18n.setLocale(l)}return a?Promise.resolve():e.refresh()}function s(e,t){if(!1!==o.path){var r=(o.path?o.path+"/":"")+e;a(e,n(68)("./"+r),t)}}var c={getLang:function(){return i},setLang:s,setLangData:a,_:null,polyglot:null};e.setService("locale",c),s(i,!0)},Menu:function(e,t,n){var o=t.getSubViewInfo().parent,r=t.$$(n.id||n),i=!1;r.attachEvent("onchange",(function(){i||I(o,n,this.getValue())})),r.attachEvent("onafterselect",(function(){if(!i){var e=null;r.setValue?e=this.getValue():r.getSelectedId&&(e=r.getSelectedId()),I(o,n,e)}})),t.on(e,"app:route",(function(){var e="";if(n.param)e=t.getParam(n.param,!0);else{var a=o.getUrl()[1];a&&(e=a.page)}e&&(i=!0,r.setValue&&r.getValue()!==e?r.setValue(e):r.select&&r.exists(e)&&r.getSelectedId()!==e&&r.select(e),i=!1)}))},Theme:function(e,t,n){var o=(n=n||{}).storage,r=o?o.get("theme")||"flat-default":n.theme||"flat-default",i={getTheme:function(){return r},setTheme:function(t,n){for(var i=t.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s].getAttribute("title");c&&(c===t||c===i[0]?a[s].disabled=!1:a[s].disabled=!0)}e.webix.skin.set(i[0]),e.webix.html.removeCss(document.body,"theme-"+r),e.webix.html.addCss(document.body,"theme-"+t),r=t,o&&o.put("theme",t),n||e.refresh()}};e.setService("theme",i),i.setTheme(r,!0)},User:function(e,t,n){var o=(n=n||{}).login||"/login",r=n.logout||"/logout",i=n.afterLogin||e.config.start,a=n.afterLogout||"/login",s=n.ping||3e5,c=n.model,u=n.user,l={getUser:function(){return u},getStatus:function(e){return e?c.status().catch((function(){return null})).then((function(e){u=e})):null!==u},login:function(t,n){return c.login(t,n).then((function(t){if(u=t,!t)throw new Error("Access denied");e.callEvent("app:user:login",[u]),e.show(i)}))},logout:function(){return u=null,c.logout().then((function(t){return e.callEvent("app:user:logout",[]),t}))}};function p(e,t){e===r?(l.logout(),t.redirect=a):e===o||l.getStatus()||(t.redirect=o)}e.setService("user",l),e.attachEvent("app:guard",(function(e,t,o){return!(!n.public||!n.public(e))||(void 0===u&&(o.confirm=l.getStatus(!0).then((function(){return p(e,o)}))),p(e,o))})),s&&setInterval((function(){return l.getStatus(!0)}),s)},Status:function(e,t,n){var o="good",r=0,i=!1,a=n.expire;a||!1===a||(a=2e3);var s=n.texts||U,c=n.icons||M;function u(e){var r=t.$$(n.target);r&&(e||(e="<div class='status_"+o+"'><span class='webix_icon fa-"+c[o]+"'></span> "+s[o]+"</div>"),r.setHTML(e))}function l(){r--,d("good")}function p(e){r--,d("error",e)}function f(e){r++,d("saving"),e&&e.then&&e.then(l,p)}function h(){0===r&&u(" ")}function d(t,n){r<0&&(r=0),"saving"===t?(o="saving",u()):(i="error"===t,0===r&&(o=i?"error":"good",i?e.error("app:error:server",[n.responseText||n]):a&&setTimeout(h,a),u()))}function b(n){var o=e.webix.dp(n);o&&(t.on(o,"onAfterDataSend",f),t.on(o,"onAfterSaveError",(function(e,t,n){return p(n)})),t.on(o,"onAfterSave",l))}"string"==typeof n&&(n={target:n}),e.setService("status",{getStatus:function(){return o},setStatus:d,track:b}),n.remote&&t.on(e.webix,"onRemoteCall",f),n.ajax&&t.on(e.webix,"onBeforeAjax",(function(e,t,n,o,r,i,a){f(a)})),n.data&&b(n.data)},UrlParam:function(e,t,n){var o=n.route||n,r={};t.on(e,"app:urlchange",(function(e,n){t===e&&(A(r,n.suburl(),o),n.size(o.length+1))}));var i=t.setParam,a=t.getParam;t.setParam=function(e,n,a){var s=o.indexOf(e);return s>=0?(r[e]=n,this._segment.update("",n,s+1),a?t.show(null):void 0):i.call(this,e,n,a)},t.getParam=function(e,t){var n=r[e];return void 0!==n?n:a.call(this,e,t)},A(r,t.getUrl(),o)}},B=window;B.Promise||(B.Promise=B.webix.promise)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=new webix.DataCollection({save:"server/tabel.php?cmd=update_developments"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=new webix.TreeCollection({url:"server/tasker.php?cmd=get_task_tree",save:"server/tasker.php?cmd=update_task_tree"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=new webix.DataCollection({url:"server/personell.php?cmd=get_personell",save:"server/personell.php?cmd=update_personel_list"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=new webix.DataCollection({url:"server/tabel.php?cmd=get_dev_type"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=new webix.DataCollection},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=new webix.DataCollection({url:"server/set_task.php?cmd=get_task_list",save:"server/set_task.php?cmd=update_task_list"})},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(3);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"combo",label:"Сотрудник",name:"personell_id",labelPosition:"top",options:[{id:1,value:"One"},{id:2,value:"Two"},{id:3,value:"Three"}]}},t.prototype.init=function(e){this.view=e,e.getPopup().getList().sync(r.a),r.a.waitData.then((function(){e.getPopup().getList().sync(r.a)})),this.app.setService("personellCombo",{getValue:function(){return e.getValue()},setValue:function(t){return e.setValue(t)}})},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(20),i=n(21);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"toolbar",elements:[r.default,i.default]}},t}(o.c);t.default=c},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(4);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"list",minHeight:120,hidden:!0,layout:"x",template:"{common.is_show()} #dev_type#",type:{is_show:function(e){return e.is_show?"<span class='check webix_icon wxi-checkbox-marked'></span>":"<span class='check webix_icon wxi-checkbox-blank'></span>"}},onClick:{check:function(t,n){var o=e.getRoot().getItem(n);o.is_show=o.is_show?0:1,e.getRoot().updateItem(n,o),e.app.getService("tabelTable").update()}},data:[]}},t.prototype.init=function(e){r.a.waitData.then((function(){e.parse(r.a)})),this.app.setService("devFilterList",{show:function(){e.isVisible()?e.hide():e.show()}})},t}(o.c);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e,t=this;return{rows:[(e={view:"toolbar",css:this.app.config.shadows},e.css=this.app.config.theme,e.localId="toolbar",e.elements=[{view:"icon",icon:"wxi-angle-left",width:40,click:function(){var e=t.getRoot().queryView("datepicker"),n=e.getValue(),o=new Date(n.setMonth(n.getMonth()-1));e.setValue(o),t.app.callEvent("monthSelectView:monthChanged",[t.getFirstDay(o)])}},{css:"patients_filter",localId:"datepicker",view:"datepicker",type:"month",value:new Date,format:"%F %Y",on:{onChange:function(e){t.app.callEvent("monthSelectView:monthChanged",[t.getFirstDay(e)])}}},{view:"icon",icon:"wxi wxi-angle-right",width:40,click:function(){var e=t.getRoot().queryView("datepicker"),n=e.getValue(),o=new Date(webix.Date.add(n,1,"month"));e.setValue(o),t.app.callEvent("monthSelectView:monthChanged",[t.getFirstDay(o)])}}],e)]}},t.prototype.init=function(e){var t=this;this.app.setService("monthSelectView",{getValue:function(){return t.getFirstDay(t.getRoot().queryView("datepicker").getValue())}})},t.prototype.ready=function(e){this.app.callEvent("monthSelectView:monthChanged",[this.getFirstDay(e.queryView("datepicker").getValue())])},t.prototype.getFirstDay=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},t}(n(0).c);t.default=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"richselect",label:"Объект",options:"server/tabel.php?cmd=get_subject",on:{onChange:function(t){e.app.getService("developmentsList").load(t)}}}},t.prototype.init=function(e){this.app.setService("subjectSelect",{getValue:function(){return e.getValue()}})},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1),i=n(4),a=n(3),s=n(5);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return c(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"datatable",fixedRowHeight:!1,rowLineHeight:22,rowHeight:22,css:"webix_header_border webix_data_border",columns:[],data:[],select:"cell",multiselect:!0,blockselect:!0,on:{onAfterSelect:function(t,n){n||(0^t.column)===t.column&&e.app.getService("developmentsList").showDay(t.column,t.row)},onBeforeSelect:function(e){if("value"===e.column)return!1},onSelectChange:function(){1==e.getRoot().getSelectedId(!0).length?e.app.getService("devForm").setSingle(!0):e.app.getService("devForm").setSingle(!1)}}}},t.prototype.init=function(e){var t=this;console.log("tabeltable init"),this.app.setService("tabelTable",{getSelectedId:function(){return e.getSelectedId(!0)},show:function(){console.log("DO tabelTable show"),s.a.clearAll(),r.a.data.each((function(e){var t=s.a.getItem(e.personell_id);if(t)e.dday in t?t[e.dday].push(e):t[e.dday]=[e];else{var n=webix.copy(a.a.getItem(e.personell_id)),o=s.a.add(n);(t=s.a.getItem(o))[e.dday]=[e]}})),e.clearAll(),e.parse(s.a),e.adjustRowHeight(),e.render()},update:function(){e.adjustRowHeight(),e.render()},addPersonell:function(n){if(console.log("personell",n),n.id<1)webix.message({type:"error",text:"Для начала  определитесь с персонажем"});else if(t.app.getService("subjectSelect").getValue()){var o=e.getItem(n.id);console.log("newPers",o),o?webix.message({type:"error",text:"Такой персонаж есть в этой сказке"}):(webix.dp(e).off(),e.add({id:n.id,value:n.value}),webix.dp(e).on(),e.adjustRowHeight(),e.render())}else webix.message({type:"error",text:"Для начала  определитесь с объектом"})},addOneDev:function(t){var n=e.getItem(t.personell_id);t.dday in n?n[t.dday].push(t):n[t.dday]=[t],e.adjustRowHeight(),e.render()},changeMonth:function(t){e.clearAll();for(var n=new Date(t),o=n.getMonth(),r=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],a=[{id:"value",header:"ФИО",fillspace:5,sort:"string",select:!1}],s=function(){var e=n.getDate(),t=n.getDay();a.push({id:e,header:[e,r[t]],fillspace:1,cssFormat:function(e,n,o,r){var a={};return 0!=t&&6!=t||(a["border-left"]="2px solid gray"),n[r]&&n[r].forEach((function(e){var t=i.a.getItem(e.dev_type_id);t.is_show&&t.cell_bgcolor&&(a["background-color"]=t.cell_bgcolor)})),a},template:function(e,t,n,o){var r="";return e[o.id]&&e[o.id].forEach((function(e){var t=i.a.getItem(e.dev_type_id);t.dev_type_short&&t.is_show&&(r+='<span style="'+t.font_style+'">'+t.dev_type_short+"</span> ")})),r}}),n.setDate(n.getDate()+1)};n.getMonth()==o;)s();e.config.columns=a,e.refreshColumns()},toExcel:function(){webix.toExcel(e,{filterHTML:!0})}})},t}(o.c);t.default=l},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(23),i=n(24);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{rows:[{view:"segmented",id:"tabbar",value:"View1",multiview:!0,options:[{value:"Работники",id:"personell"},{value:"Роли",id:"roles"}]},{id:"mymultiview",cells:[{id:"personell",cols:[r.default,i.default]}]}]}},t}(o.c);t.default=c},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(25),i=n(40),a=n(26);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"wide",margin:10,padding:{top:10,bottom:10,right:10,left:5},rows:[r.default,{cols:[i.default,{view:"resizer"},a.default]}]}},t}(o.c);t.default=u},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(8),i=n(42),a=n(27);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"layout",rows:[r.default,{view:"accordion",multi:!0,cols:[{body:i.default},{hidden:!0,body:a.default}]}]}},t}(o.c);t.default=u},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(9),i=n(10),a=n(11),s=n(28),c=n(12);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){return u(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{type:"wide",margin:10,padding:{top:10,bottom:10,right:10,left:5},rows:[{view:"form",cols:[{view:"icon",icon:"mdi mdi-filter",click:function(){e.app.getService("devFilterList").show()}},{gravity:.2},i.default,{gravity:.2},a.default,{view:"icon",icon:"mdi mdi-microsoft-excel",click:function(){e.app.getService("tabelTable").toExcel()}}]},r.default,c.default,{view:"resizer"},s.default]}},t}(o.c);t.default=p},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(9),i=n(10),a=n(11),s=n(29),c=n(30),u=n(31),l=n(12);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){return p(this,t),f(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{type:"wide",margin:10,padding:{top:10,bottom:10,right:10,left:5},rows:[{view:"form",cols:[{view:"icon",icon:"mdi mdi-filter",click:function(){e.app.getService("devFilterList").show()}},{gravity:.2},i.default,{gravity:.2},a.default,{view:"icon",icon:"mdi mdi-account-plus-outline",click:function(){e.app.getService("personellSelect").show()}}]},r.default,s.default,l.default,{view:"resizer"},{cols:[u.default,c.default]}]}},t}(o.c);t.default=h},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(32),i=n(33),a=n(34),s=n(35);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return c(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"wide",margin:10,padding:{top:10,bottom:10,right:10,left:5},rows:[r.default,{cols:[{rows:[{view:"template",template:"Постоянные",autoheight:!0},i.default]},{view:"resizer"},{rows:[{view:"template",template:"Внеплановые",autoheight:!0},a.default]},{view:"resizer"},{rows:[{view:"template",template:"Информирование",autoheight:!0},s.default]}]}]}},t}(o.c);t.default=l},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(8),i=n(41),a=n(39);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"layout",rows:[r.default,{view:"accordion",multi:!0,cols:[{body:i.default},{hidden:!0,body:a.default}]}]}},t}(o.c);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"search",keyPressTimeout:1e3,on:{onTimedKeyPress:function(){e.app.callEvent("search:searchField",[e.view.getValue()])}}}},t.prototype.init=function(e){this.view=e,this.app.setService("searchField",{getValue:function(){return e.getValue()}})},t}(n(0).c);t.default=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{cols:[{view:"icon",icon:"mdi mdi-folder-plus-outline",tooltip:"Новый основной элемент",click:function(){e.app.callEvent("createRoot:treeControlPanel")}},{view:"icon",icon:"mdi mdi-plus",tooltip:"Новый подчиненный элемент",click:function(){e.app.callEvent("createSlave:treeControlPanel")}},{view:"icon",icon:"wxi-trash",tooltip:"Удалить выбранный",click:function(){e.app.callEvent("delete:treeControlPanel")}}]}},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"sidebar",id:"top:menu",collapsed:!0,data:[],on:{onItemClick:function(t){return"logout"!==t||(e.show("/login"),!1)}}}},t.prototype.init=function(e){e.parse(this.app.getService("user").getUser().modules),e.add({id:"logout",value:"Выйти",icon:"mdi mdi-logout"}),this.use(o.d.Menu,"top:menu")},t}(o.c);t.default=a},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(3);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"list",select:!0,template:"#p_surname# #p_name#",on:{onAfterSelect:function(e){r.a.setCursor(e)}}}},t.prototype.init=function(e){e.data.sync(r.a)},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(3),i=n(44);n(67);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"form",elements:[{cols:[{},{view:"photo",name:"photo",localId:"photo",css:"form_photo",borderless:!0,width:260,height:260},{}]},{view:"uploader",multiple:!1,upload:"server/personell.php?cmd=upload_photo",label:"Загрузить",align:"center",on:{onUploadComplete:function(t){webix.message("Файл загружен"),console.log("response.fname",t.fname),e.$$("photo").setValue(t.fname)}}},{view:"text",label:"Имя",name:"p_name"},{view:"text",label:"Отчество",name:"p_patronymic"},{view:"text",label:"Фамилия",name:"p_surname"},{view:"datepicker",name:"birthday",label:"Дата рождения",placeholder:"Кликните для выбора",editable:!0,type:"date",stringResult:!0},{view:"text",label:"Логин",name:"p_login"},{view:"text",label:"Пароль",name:"p_passwd"},i.default,{view:"checkbox",name:"active",labelRight:"Актуально",labelWidth:0},{view:"button",label:"Сохранить",click:function(){var t=e.getRoot(),n=t.getValues();n.id?t.save():r.a.add(n,0)}},{view:"button",value:"Удалить",click:function(){r.a.remove(form.getValues().id)}},{view:"button",label:"Очистить",click:function(){e.getRoot().clear()}},{}]}},t.prototype.init=function(e){e.bind(r.a)},t}(o.c);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"toolbar",elements:[{view:"search"}]}},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(6);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"list",type:{template:'<image class="user_photo" src="data/photos/#photo#" /><div class="text"><span class="username">#task_title#</span><br>#personell#<br>#task#</div>',height:260}}},t.prototype.init=function(e){e.sync(r.a),r.a.attachEvent("onBindUpdate",(function(e,t){console.log("onBindUpdate")})),r.a.waitData.then((function(){console.log("waitData")})),this.clearFilter(),this.app.setService("setTaskList",{})},t.prototype.filter=function(){this.getRoot().filter((function(e){return 1==e.task_type_id})),r.a.setCursor(null)},t.prototype.clearFilter=function(){this.getRoot().filter((function(e){return 1==e.task_type_id})),r.a.setCursor(null)},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(46),i=n(43);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{rows:[r.default,{view:"scrollview",localId:"scrollview",body:{rows:[{view:"template",template:"Реквизиты",type:"header"},i.default]},hidden:!0},{gravity:.01}]}},t.prototype.init=function(e){var t=this;this.on(this.app,"createRoot:treeControlPanel",(function(){e.show()})),this.on(this.app,"createSlave:treeControlPanel",(function(){var n=t.app.getService("structureTree").getSelectedItem();if(console.log("createSlave:treeControlPanel",n),!n)return webix.message({type:"error",text:"Выберите параметр"}),!1;e.show(),t.app.callEvent("showForm:formPanel",[{$level:n.$level+1,$parent:n.id}])})),this.on(this.app,"delete:treeControlPanel",(function(){e.hide()})),this.on(this.app,"save:structureForm",(function(){e.hide()})),this.on(this.app,"cancel:structureForm",(function(){e.hide()})),this.on(this.app,"click:structureTree",(function(n){e.show(),1==n.$level?t.$$("scrollview").show():t.$$("scrollview").hide()}))},t}(o.c);t.default=c},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1),i=n(4);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{gravity:.3,view:"list",minHeight:120,select:!0,template:function(e){var t="",n=i.a.getItem(e.dev_type_id);return n.cell_bgcolor&&(t+=" background-color:"+n.cell_bgcolor+';"'),n.cell_border&&(t+=" border:"+n.cell_border+';"'),'<div style="'+t+'"><span style="'+n.font_style+'">'+n.dev_type+"</span> "+(e.param?e.param+" "+n.param_measure:"")+"</div>"},data:[]}},t.prototype.init=function(e){var t=this;e.sync(r.a),r.a.attachEvent("onBindUpdate",(function(e,n){console.log("onBindUpdate"),t.filter()})),r.a.waitData.then((function(){console.log("waitData"),t.clearFilter()})),this.clearFilter(),this.on(this.app,"monthSelectView:monthChanged",(function(e){var n=t.app.getService("subjectSelect").getValue();t.app.getService("tabelTable").changeMonth(e),n&&t.load(format(e),n)})),this.app.setService("developmentsList",{showDay:function(e,n){t.personellId=n,t.dday=e,t.filter()},load:function(e){t.load(format(t.app.getService("monthSelectView").getValue()),e)},filter:function(){t.filter()},clearFilter:function(){console.log("DO clearFilter"),t.clearFilter()}})},t.prototype.load=function(e,t){var n=this;r.a.clearAll(),r.a.load("server/tabel.php?cmd=get_developments\n\t\t\t&subject_id="+t+"\n\t\t\t&start_date="+e+"\n\t\t\t").then((function(e){n.app.getService("tabelTable").show(),n.clearFilter()}))},t.prototype.filter=function(){var e=this;this.getRoot().filter((function(t){return t.dday==e.dday&&t.personell_id==e.personellId})),r.a.setCursor(null)},t.prototype.clearFilter=function(){this.personellId=0,this.dday=0,this.getRoot().filter((function(e){return!1})),r.a.setCursor(null)},t}(o.c);t.default=c},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(3);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{hidden:!0,cols:[{label:"Сотрудник",labelWidth:120,view:"combo",options:[]},{view:"icon",icon:"mdi mdi-plus",click:function(){e.app.getService("tabelTable").addPersonell(e.getValue()),e.getRoot().hide()}}]}},t.prototype.init=function(e){var t=this;this.getRoot().queryView("combo").getList().parse(r.a),this.app.setService("personellSelect",{getValue:function(){return t.getValue()},show:function(){e.isVisible()?e.hide():e.show()}})},t.prototype.getValue=function(){var e=this.getRoot().queryView("combo");return{id:e.getValue(),value:e.getText()}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(4),i=n(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"form",elements:[{name:"dev_type_id",view:"combo",labelWidth:0,options:[],invalidMessage:"Вид активности не может быть пустым",required:!0},{label:"Параметр",view:"text",name:"param"},{view:"button",label:"Сохранить",click:function(){var t=e.getRoot();if(t.validate()){console.log("all clear!!!");var n=t.getValues();if(console.log("values",n),n.id>0&&e.single)t.save();else{var o=e.app.getService("tabelTable").getSelectedId();console.log("selectedCells",o),console.log("selectedCells",o.length);var r=e.app.getService("subjectSelect").getValue(),a=format(e.app.getService("monthSelectView").getValue()),s=a.substring(0,a.length-2);if(0==o.length)return void webix.message({type:"error",text:"Не выбран день"});if(1==o.length)n.personell_id=o[0].row,n.dev_date=s+o[0].column,n.subject_id=r,n.dday=o[0].column,i.a.waitSave((function(){i.a.add(n)})).then((function(t){"success"==t.status&&(e.app.getService("tabelTable").addOneDev(i.a.getItem(t.id)),e.app.getService("developmentsList").filter())}));else{var c="";o.forEach((function(e){n.param&&n.param;c+="("+e.row+",'"+(s+e.column)+"',"+r+","+n.dev_type_id+","+n.param+"),"})),c=c.substring(0,c.length-1),webix.ajax().post("server/tabel.php?cmd=add_dev_data",{values:c,subject_id:r,start_date:a}).then((function(t){t=t.json(),i.a.parse(t),console.log("developmentsStorage",i.a.data.pull),e.app.getService("developmentsList").clearFilter(),e.app.getService("tabelTable").show()}))}}}}},{view:"button",label:"Очистить",click:function(){e.getRoot().clear()}}]}},t.prototype.init=function(e){var t=this;e.bind(i.a),e.queryView("combo").getList().sync(r.a),this.app.setService("devForm",{setValues:function(t){e.setValues(t)},clear:function(){e.clear()},setSingle:function(e){t.single=e}})},t}(o.c);t.default=c},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1),i=n(4);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"list",minHeight:120,select:!0,template:function(e){var t="",n=i.a.getItem(e.dev_type_id);return n.cell_bgcolor&&(t+=" background-color:"+n.cell_bgcolor+';"'),n.cell_border&&(t+=" border:"+n.cell_border+';"'),'<div style="'+t+'"><span style="'+n.font_style+'">'+n.dev_type+"</span> "+(e.param?e.param+" "+n.param_measure:"")+'<span class="webix_icon mdi mdi-close remove-icon" title="Remove"></span></div>'},onClick:{"remove-icon":function(t,n){r.a.waitSave((function(){r.a.remove(n)})).then((function(t){console.log("remove-icon",t),e.app.getService("tabelTable").show(),e.filter(),t.status}))}},on:{onAfterSelect:function(e){r.a.setCursor(e)}},data:[]}},t.prototype.init=function(e){var t=this;e.sync(r.a),r.a.attachEvent("onBindUpdate",(function(e,n){console.log("onBindUpdate"),t.filter()})),r.a.waitData.then((function(){console.log("waitData"),t.clearFilter()})),this.clearFilter(),this.on(this.app,"monthSelectView:monthChanged",(function(e){var n=t.app.getService("subjectSelect").getValue();t.app.getService("tabelTable").changeMonth(e),n&&t.load(format(e),n)})),this.app.setService("developmentsList",{showDay:function(e,n){t.personellId=n,t.dday=e,t.filter(),t.app.getService("devForm").clear()},load:function(e){t.load(format(t.app.getService("monthSelectView").getValue()),e)},filter:function(){t.filter()},clearFilter:function(){console.log("DO clearFilter"),t.clearFilter()}})},t.prototype.load=function(e,t){var n=this;r.a.clearAll(),r.a.load("server/tabel.php?cmd=get_developments\n\t\t\t&subject_id="+t+"\n\t\t\t&start_date="+e+"\n\t\t\t").then((function(e){n.app.getService("tabelTable").show(),n.clearFilter()})),this.app.getService("devForm").clear()},t.prototype.filter=function(){var e=this;this.getRoot().filter((function(t){return t.dday==e.dday&&t.personell_id==e.personellId})),r.a.setCursor(null)},t.prototype.clearFilter=function(){this.personellId=0,this.dday=0,this.getRoot().filter((function(e){return!1})),r.a.setCursor(null)},t}(o.c);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"toolbar",elements:[{view:"search"}]}},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(2);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"list",type:{template:'<image class="user_photo" src="data/photos/#photo#" /><div class="text"><span class="username">#task_title#</span><br>#author_name#<br>#task#</div>',height:260}}},t.prototype.init=function(e){var t=this;e.sync(r.a),r.a.attachEvent("onBindUpdate",(function(e,n){console.log("onBindUpdate"),t.filter()})),r.a.waitData.then((function(){console.log("waitData"),t.clearFilter()})),this.clearFilter(),this.app.setService("constantlyList",{})},t.prototype.filter=function(){this.getRoot().filter((function(e){return 1==e.task_type_id})),r.a.setCursor(null)},t.prototype.clearFilter=function(){this.getRoot().filter((function(e){return 1==e.task_type_id})),r.a.setCursor(null)},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(2);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"list",type:{template:'<image class="user_photo" src="data/photos/#photo#" /><div class="text"><span class="username">#task_title#</span><br>#author_name#<br>#task#</div>',height:260}}},t.prototype.init=function(e){var t=this;e.sync(r.a),r.a.attachEvent("onBindUpdate",(function(e,n){console.log("onBindUpdate"),t.filter()})),r.a.waitData.then((function(){console.log("waitData"),t.clearFilter()})),this.clearFilter(),this.app.setService("urgentlyList",{})},t.prototype.filter=function(){this.getRoot().filter((function(e){return 2==e.task_type_id})),r.a.setCursor(null)},t.prototype.clearFilter=function(){this.getRoot().filter((function(e){return 2==e.task_type_id})),r.a.setCursor(null)},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(2);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"list",type:{template:'<image class="user_photo" src="data/photos/#photo#" /><div class="text"><span class="username">#task_title#</span><br>#author_name#<br>#task#</div>',height:260}}},t.prototype.init=function(e){var t=this;e.sync(r.a),r.a.attachEvent("onBindUpdate",(function(e,n){console.log("onBindUpdate"),t.filter()})),r.a.waitData.then((function(){console.log("waitData"),t.clearFilter()})),this.clearFilter(),this.app.setService("informingList",{})},t.prototype.filter=function(){this.getRoot().filter((function(e){return 3==e.task_type_id})),r.a.setCursor(null)},t.prototype.clearFilter=function(){this.getRoot().filter((function(e){return 3==e.task_type_id})),r.a.setCursor(null)},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(37),i=(n(47),n(38));function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"toolbar",css:this.app.config.theme+" webix_shadow_small",height:56,elements:[{view:"icon",icon:"mdi mdi-menu",click:function(){$$("top:menu").toggle()}},{},{paddingY:7,rows:[{margin:8,cols:[{view:"template",template:function(e){return e.photo||(e.photo="male.png"),'<image class="mainphoto" src="data/photos/'+e.photo+'" webix_tooltip="Открыть мой профиль">'},width:40,borderless:!0,css:"toolbar_photo",localId:"user:avatar",onClick:{mainphoto:function(){return this.$scope.profileMenu.showMenu(this.$view),!1}}},{view:"icon",icon:"mdi mdi-settings",tooltip:"Открыть настройки оформления",click:function(){this.$scope.themeSettings.showPopup(this.$view)}},{view:"icon",icon:"mdi mdi-bell",badge:4,tooltip:"Сообщения и напоминания",click:function(){}}]}]},{width:6}]}},t.prototype.init=function(){this.profileMenu=this.ui(r.default),this.themeSettings=this.ui(i.default);var e=this.app.getService("user").getUser();console.log("TOOLBAR ===> user.getUser() ->",e),this.$$("user:avatar").setValues(e),webix.TooltipControl.addTooltip(this.$$("user:avatar").$view)},t}(o.c);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"popup",body:{view:"list",localId:"menu",autoheight:!0,width:150,borderless:!0,css:"profile_menu",data:[{id:"profile",value:"Мой профиль",icon:"mdi mdi-account"},{id:"dashboard",value:"Рабочий стол",icon:"mdi mdi-view-dashboard"},{id:"logout",value:"Выйти",icon:"mdi mdi-logout"}],on:{onItemClick:function(t){"logout"===t?e.show("/login"):("profile"===t?e.show("profile/profileinfo/about"):e.show(t),e.getRoot().hide())}}}}},t.prototype.showMenu=function(e){this.getRoot().show(e)},t}(n(0).c);t.default=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.config;return{view:"popup",width:180,body:{padding:10,rows:[{view:"switch",css:"theme_switch",value:t.theme?1:0,label:"Toolbars",labelWidth:70,onLabel:"Dark",offLabel:"Light",on:{onChange:function(t){return e.switchThemes(t)}}},{view:"switch",label:"Shadows",labelWidth:70,value:t.shadows?1:0,css:"theme_switch",onLabel:"On",offLabel:"Off",on:{onChange:function(t){return e.switchShadows(t)}}}]}}},t.prototype.showPopup=function(e){this.getRoot().show(e)},t.prototype.switchThemes=function(e){var t=this,n=1==e?"webix_dark":"";this.app.config.theme=n;try{webix.storage.session.put("doctor_demo_theme",n)}catch(e){}webix.delay((function(){return t.app.refresh()}),null,null,500)},t.prototype.switchShadows=function(e){var t=this,n=1==e?"webix_shadow_small":"";this.app.config.shadows=n;try{webix.storage.session.put("doctor_demo_shadows",n)}catch(e){}webix.delay((function(){return t.app.refresh()}),null,null,500)},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(45);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{rows:[r.default,{gravity:.01}]}},t.prototype.init=function(e){var t=this;this.on(this.app,"createRoot:treeControlPanel",(function(){e.show()})),this.on(this.app,"createSlave:treeControlPanel",(function(){console.log("createSlave:treeControlPanel");var n=t.app.getService("unitTree").getSelectedItem();if(console.log("createSlave:treeControlPanel",n),!n)return webix.message({type:"error",text:"Выберите параметр"}),!1;e.show(),t.app.callEvent("showForm:formPanel",[{$level:n.$level+1,$parent:n.id}])})),this.on(this.app,"delete:treeControlPanel",(function(){e.hide()})),this.on(this.app,"save:unitForm",(function(){e.hide()})),this.on(this.app,"cancel:unitForm",(function(){e.hide()})),this.on(this.app,"click:unitTree",(function(t){console.log("click",t),e.show()}))},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(3),i=(new webix.DataCollection({url:"server/set_task.php?cmd=get_job_type"}),new webix.DataCollection({url:"server/set_task.php?cmd=get_personell_group"})),a=(new webix.DataCollection({url:"server/set_task.php?cmd=get_priority"}),new webix.DataCollection({url:"server/set_task.php?cmd=get_task_state"}),new webix.DataCollection({url:"server/set_task.php?cmd=get_task_type"})),s=n(6);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return c(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"form",elements:[{name:"task_type_id",view:"combo",label:"Тип задания",options:a,invalidMessage:"Тип задания не может быть пустым",required:!0},{name:"task_title",view:"text",label:"Заголовок"},{name:"task",view:"textarea",label:"Содержание",height:200},{view:"switch",onLabel:"Сотруднику",offLabel:"Группе",value:1,on:{onChange:function(t){t?(e.getRoot().elements.personell_id.show(),e.getRoot().elements.personell_group_id.hide()):(e.getRoot().elements.personell_id.hide(),e.getRoot().elements.personell_group_id.show())}}},{name:"personell_id",view:"combo",options:r.a},{name:"personell_group_id",view:"combo",options:i},{view:"button",label:"Сохранить",click:function(){var t=e.getRoot();if(t.validate()){console.log("all clear!!!");var n=t.getValues();console.log("values",n),n.id>0?t.save():s.a.waitSave((function(){s.a.add(n)})).then((function(e){e.status}))}}},{view:"button",label:"Очистить",click:function(){e.getRoot().clear()}},{}]}},t.prototype.init=function(e){var t=this;e.bind(s.a),this.app.setService("setTaskForm",{setValues:function(t){e.setValues(t)},clear:function(){e.clear()},setSingle:function(e){t.single=e}})},t}(o.c);t.default=l},function(e,t,n){"use strict";n.r(t);var o=n(0),r=(new webix.TreeCollection({url:"server/unit_settings.php?cmd=get_unit_dynamic_tree",save:{url:"server/unit_settings.php?cmd=update_unit_tree"},on:{}}),new webix.DataCollection({url:"server/unit_settings.php?cmd=get_personell",save:"server/unit_settings.php?cmd=update_personell"}));function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"tree",url:"server/unit_settings.php?cmd=get_unit_dynamic_tree",save:"server/unit_settings.php?cmd=update_unit_tree",template:function(e,t){var n=t.icon(e,t)+t.folder(e,t),o="";return e.terminal_bool||(o+=e.value+" - "),o+=e.post+" (",e.personell_id?o+=r.getItem(e.personell_id).value:o+="вакантна",o+=")",e.active||(o='<span style="font-style:italic;">'+o+"</span>"),n+o},type:{folder:function(e){return e.terminal_bool?"<span class='webix_icon mdi mdi-account'></span>":1==e.$level?"<span class='webix_icon mdi mdi-hospital-building'></span>":"<span class='webix_icon mdi mdi-account-multiple'></span>"}},select:!0,filterMode:{openParents:!1,level:1,showSubItems:!0},on:{onItemClick:function(t){e.app.callEvent("click:unitTree",[e.view.getItem(t)])}}}},t.prototype.init=function(e){var t=this;this.view=e,this.on(this.app,"search:searchField",(function(e){e.length>0?t.filter(e,null):t.filter()})),this.on(this.app,"save:unitForm",(function(t){t.id?e.updateItem(t.id,t):e.add(t,-1,t.$parent)})),this.on(this.app,"delete:treeControlPanel",(function(){var t=e.getSelectedItem();t?0==t.$count?webix.confirm({title:"Подтвердите действие",ok:"Да",cancel:"Отменить",text:"Вы хотите удалить "+t.value+"?"}).then((function(n){e.remove(t.id)})):webix.message({type:"error",text:"Невозможно удалить, так как содержит другие элементы"}):webix.message({type:"error",text:"Ничего не выбрано"})})),this.app.setService("unitTree",{getSelectedItem:function(){return e.getSelectedItem()}})},t.prototype.filter=function(e,t){if(e||(e=this.app.getService("searchField").getValue()),t||(t=this.app.getService("showArchSwitch").getValue()),e.length>0){var n=e.toLowerCase();this.view.filter((function(e){return(e.active||t)&&e.value.toLowerCase().indexOf(n)>=0}))}else this.view.filter((function(e){return e.active||t}))},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=(new webix.TreeCollection({url:"server/structure_settings.php?cmd=get_structure_dynamic_tree",save:{url:"server/structure_settings.php?cmd=update_structure_tree"},on:{}}),new webix.DataCollection({url:"server/structure_settings.php?cmd=get_personell",save:"server/structure_settings.php?cmd=update_personell"}));function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"tree",url:"server/structure_settings.php?cmd=get_structure_dynamic_tree",save:"server/structure_settings.php?cmd=update_structure_tree",template:function(e,t){var n=t.icon(e,t)+t.folder(e,t),o="";return e.terminal_bool||(o+=e.value+" - "),o+=e.post+" (",e.personell_id?o+=r.getItem(e.personell_id).value:o+="вакантна",o+=")",e.active||(o='<span style="font-style:italic;">'+o+"</span>"),n+o},type:{folder:function(e){return e.terminal_bool?"<span class='webix_icon mdi mdi-account'></span>":1==e.$level?"<span class='webix_icon mdi mdi-hospital-building'></span>":"<span class='webix_icon mdi mdi-account-multiple'></span>"}},select:!0,filterMode:{openParents:!1,level:1,showSubItems:!0},on:{onItemClick:function(t){e.app.callEvent("click:structureTree",[e.view.getItem(t)])}}}},t.prototype.init=function(e){var t=this;this.view=e,this.on(this.app,"search:searchField",(function(e){e.length>0?t.filter(e,null):t.filter()})),this.on(this.app,"change:showArchSwitch",(function(e){t.filter(null,e)})),this.on(this.app,"save:structureForm",(function(t){t.id?e.updateItem(t.id,t):e.add(t,-1,t.$parent)})),this.on(this.app,"delete:treeControlPanel",(function(){var t=e.getSelectedItem();t?0==t.$count?webix.confirm({title:"Подтвердите действие",ok:"Да",cancel:"Отменить",text:"Вы хотите удалить "+t.value+"?"}).then((function(n){e.remove(t.id)})):webix.message({type:"error",text:"Невозможно удалить, так как содержит другие элементы"}):webix.message({type:"error",text:"Ничего не выбрано"})})),this.app.setService("structureTree",{getSelectedItem:function(){return e.getSelectedItem()}})},t.prototype.filter=function(e,t){if(e||(e=this.app.getService("searchField").getValue()),t||(t=this.app.getService("showArchSwitch").getValue()),e.length>0){var n=e.toLowerCase();this.view.filter((function(e){return(e.active||t)&&e.value.toLowerCase().indexOf(n)>=0}))}else this.view.filter((function(e){return e.active||t}))},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=new webix.DataCollection({url:"server/structure_settings.php?cmd=get_requisites",save:"server/structure_settings.php?cmd=update_requisites"});function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"form",hidden:!0,elements:[{view:"text",name:"org_code",label:"Код организации",labelPosition:"top"},{view:"text",required:!0,name:"org_name",labelPosition:"top",label:"Полное наименование"},{view:"text",name:"org_name_short",label:"Краткое наименование",labelPosition:"top"},{view:"textarea",name:"adress_reg",labelPosition:"top",label:"Юридический адрес",height:200},{view:"textarea",name:"adress_fact",label:"Фактический адрес",labelPosition:"top",height:200},{view:"text",name:"inn ",labelPosition:"top",label:"ИНН"},{view:"text",name:"kpp ",labelPosition:"top",label:"КПП"},{view:"text",name:"okpo ",labelPosition:"top",label:"ОКПО"},{view:"text",name:"ogrn ",labelPosition:"top",label:"ОГРН"},{view:"text",name:"attestat_number",labelPosition:"top",label:"Номер аттестата"},{view:"text",name:"director_name",labelPosition:"top",label:"Ф.И.О. руководителя организации"},{view:"text",name:"director_post",labelPosition:"top",label:"Наименование должности руководителя"},{view:"text",name:"director_phone",labelPosition:"top",label:"Номер служебного телефона руководителя"},{view:"text",name:"director_email",labelPosition:"top",label:"Адрес официальной электронной почты руководителя"},{cols:[{view:"button",value:"Сохранить",hotkey:"enter",click:function(){if(e.view.isDirty())if(e.view.validate()){var t=e.view.getValues();console.log("requisites0",t),t.id?r.updateItem(t.id,t):r.add(t)}else webix.message({type:"error",text:"Заполните все поля"})}}]}]}},t.prototype.init=function(e){this.view=e,this.on(this.app,"click:structureTree",(function(t){if(console.log("click",t),1==t.$level){var n=r.find((function(e){return e.structure_id==t.id}),!0);if(console.log("requisites1",n),n)e.setValues(n);else{var o={structure_id:t.id};console.log("requisites2",o),e.setValues(o)}e.show()}else e.hide()}))},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=new webix.DataCollection({url:"server/personell.php?cmd=get_role_list",save:"server/personell.php?cmd=update_role_list"});function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{label:"Роль",name:"role_id",view:"combo",options:[]}},t.prototype.init=function(e){o.waitData.then((function(){e.getList().data.sync(o)})),this.app.setService("roleSelect",{getValue:function(){return e.getValue()},getItem:function(){var t=e.getValue();return e.getList().getItem(t)}})},t}(n(0).c);t.default=a},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(7);new webix.DataCollection({url:"server/unit_settings.php?cmd=get_role"});function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"form",elements:[{view:"text",label:"Наименование подразделения",name:"value",labelPosition:"top",required:!0},{view:"text",label:"Наименование должности",name:"post",labelPosition:"top"},{view:"datepicker",type:"time",name:"work_begin",localId:"work_begin",label:"Начало работы",labelPosition:"top"},{view:"datepicker",type:"time",name:"work_end",label:"Окончание работы",labelPosition:"top",invalidMessage:"Время окончания должно быть позже чем время начала"},{cols:[r.default,{view:"icon",icon:"mdi mdi-account-remove-outline",click:function(){e.app.getService("personellCombo").setValue("")}}]},{view:"checkbox",name:"terminal_bool",labelRight:"Без подчиненных",labelWidth:0},{view:"checkbox",name:"active",labelRight:"Актуально",labelWidth:0},{cols:[{view:"button",value:"Сохранить",hotkey:"enter",click:function(){var t=e.getRoot();if(t.isDirty())if(t.validate()){var n=t.getValues();n.work_begin=n.work_begin.getHours()+":"+n.work_begin.getMinutes(),n.work_end=n.work_end.getHours()+":"+n.work_end.getMinutes(),e.app.callEvent("save:unitForm",[n])}else webix.message({type:"error",text:"Заполните все поля"})}},{view:"button",value:"Отмена",hotkey:"esc",click:function(){e.app.callEvent("cancel:unitForm"),e.view.hide()}}]},{}],rules:{work_end:function(t){return t>e.$$("work_begin").getValue()}}}},t.prototype.init=function(e){this.view=e,this.on(this.app,"createRoot:treeControlPanel",(function(){e.clear(),e.setDirty(!1),e.focus("value"),e.show()})),this.on(this.app,"showForm:formPanel",(function(t){e.clear(),console.log(t),e.setValues(t),e.setDirty(!1),e.show()})),this.on(this.app,"click:unitTree",(function(t){console.log(t),e.setValues(t),e.setDirty(!1),e.show()}))},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(7),i=new webix.DataCollection({url:"server/structure_settings.php?cmd=get_role"});function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"form",hidden:!0,elements:[{view:"text",label:"Наименование подразделения",name:"value",labelPosition:"top",required:!0},{view:"richselect",localId:"role_id",name:"role_id",label:"Роль",labelPosition:"top",options:i,value:0},{view:"checkbox",name:"is_medical",labelRight:"Лечебная часть",labelWidth:0},{view:"checkbox",name:"is_have_price",labelRight:"Свой прайс",labelWidth:0},{view:"text",label:"Наименование должности",name:"post",labelPosition:"top"},{view:"richselect",label:"Тип должности",name:"post_type_id",labelPosition:"top",options:"server/structure_settings.php?cmd=get_post_type"},{view:"richselect",label:"Профиль помощи",name:"profile_stomat_care_id",labelPosition:"top",options:"server/structure_settings.php?cmd=get_profile_stomat_care"},{view:"datepicker",type:"time",name:"work_begin",localId:"work_begin",label:"Начало работы",labelPosition:"top"},{view:"datepicker",type:"time",name:"work_end",label:"Окончание работы",labelPosition:"top",invalidMessage:"Время окончания должно быть позже чем время начала"},{cols:[r.default,{view:"icon",icon:"mdi mdi-account-remove-outline",click:function(){e.app.getService("personellCombo").setValue("")}}]},{view:"checkbox",name:"is_have_schedule",labelRight:"Ведёт приём",labelWidth:0},{view:"checkbox",name:"terminal_bool",labelRight:"Без подчиненных",labelWidth:0},{view:"checkbox",name:"active",labelRight:"Актуально",labelWidth:0},{cols:[{view:"button",value:"Сохранить",hotkey:"enter",click:function(){var t=e.getRoot();if(t.isDirty())if(t.validate()){var n=t.getValues();n.work_begin_int=60*n.work_begin.getHours()+n.work_begin.getMinutes(),n.work_end_int=60*n.work_end.getHours()+n.work_end.getMinutes(),e.app.callEvent("save:structureForm",[n])}else webix.message({type:"error",text:"Заполните все поля"})}},{view:"button",value:"Отмена",hotkey:"esc",click:function(){e.app.callEvent("cancel:structureForm"),e.view.hide()}}]},{}],rules:{work_end:function(t){return t>e.$$("work_begin").getValue()}}}},t.prototype.init=function(e){this.view=e,this.on(this.app,"createRoot:treeControlPanel",(function(){e.clear(),e.setDirty(!1),e.focus("value"),e.show()})),this.on(this.app,"showForm:formPanel",(function(t){e.clear(),t.work_begin=addLeadZero(t.work_begin_int-t.work_begin_int%60)/60+":"+addLeadZero(t.work_begin_int%60),t.work_end=addLeadZero((t.work_end_int-t.work_end_int%60)/60)+":"+addLeadZero(t.work_end_int%60),e.setValues(t),e.setDirty(!1),e.show()})),this.on(this.app,"click:structureTree",(function(t){console.log(t),t.work_begin=addLeadZero(t.work_begin_int-t.work_begin_int%60)/60+":"+addLeadZero(t.work_begin_int%60),t.work_end=addLeadZero((t.work_end_int-t.work_end_int%60)/60)+":"+addLeadZero(t.work_end_int%60),e.setValues(t),e.setDirty(!1),e.show()}))},t}(o.c);t.default=c},function(e,t,n){"use strict";t.a={status:function(){return webix.ajax().post("server/login.php?status").then((function(e){return e.json()}))},login:function(e,t){return webix.ajax().headers({"Content-type":"application/json"}).post("http://185.174.235.90:8080/api/v1/user/login",{login:e,password:t}).then((function(e){return e.json()}))},logout:function(){return webix.ajax().post("server/login.php?logout").then((function(e){return e.json()}))}}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"search",keyPressTimeout:1e3,on:{onTimedKeyPress:function(){e.app.callEvent("search:searchField2",[e.view.getValue()])}}}},t.prototype.init=function(e){this.view=e,this.app.setService("searchField2",{getValue:function(){return e.getValue()},show:function(){e.show()},hide:function(){e.hide()}})},t}(n(0).c);t.default=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"switch",label:"Архив",labelWidth:50,tooltip:"Показывать элементы находящиеся в архиве",value:0,on:{onChange:function(t,n){e.app.callEvent("change:showArchSwitch",[t])}}}},t.prototype.init=function(e){this.app.setService("showArchSwitch",{getValue:function(){return e.getValue()}})},t}(n(0).c);t.default=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{cols:[{},{rows:[{},{view:"form",localId:"login:form",width:400,borderless:!1,margin:10,rows:[{type:"header",template:this.app.config.name},{view:"text",name:"login",label:"User Name",labelPosition:"top"},{view:"text",type:"password",name:"pass",label:"Password",labelPosition:"top"},{view:"button",value:"Login",click:function(){return e.do_login()},hotkey:"enter"}],rules:{login:webix.rules.isNotEmpty,pass:webix.rules.isNotEmpty}},{}]},{}]}},t.prototype.init=function(e){e.$view.querySelector("input").focus()},t.prototype.do_login=function(){var e=this.app.getService("user"),t=this.$$("login:form");if(t.validate()){var n=t.getValues();e.login(n.login,n.pass).then((function(e){console.log("a",e),console.log("this",this)})).catch((function(e){console.log("a",e),console.log("this",this),webix.html.removeCss(t.$view,"invalid_login"),t.elements.pass.focus(),webix.delay((function(){webix.html.addCss(t.$view,"invalid_login")}))}))}},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(3);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{hidden:!0,cols:[{label:"Сотрудник",labelWidth:120,view:"combo",options:[]},{view:"icon",icon:"mdi mdi-plus",click:function(){e.app.getService("tabelTable").addPersonell(e.getValue()),e.getRoot().hide()}}]}},t.prototype.init=function(e){var t=this;this.getRoot().queryView("combo").getList().parse(r.a),this.app.setService("personellSelect",{getValue:function(){return t.getValue()},show:function(){e.isVisible()?e.hide():e.show()}})},t.prototype.getValue=function(){var e=this.getRoot().queryView("combo");return{id:e.getValue(),value:e.getText()}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(2);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"list",type:{template:'<image class="user_photo" src="data/photos/#photo#" /><div class="text"><span class="username">#task_title#</span><br>#author_name#<br>#task#</div>',height:260}}},t.prototype.init=function(e){var t=this;e.sync(r.a),r.a.attachEvent("onBindUpdate",(function(e,n){console.log("onBindUpdate"),t.filter()})),r.a.waitData.then((function(){console.log("waitData"),t.clearFilter()})),this.clearFilter(),this.app.setService("urgentlyList",{})},t.prototype.filter=function(){this.getRoot().filter((function(e){return 2==e.task_type_id})),r.a.setCursor(null)},t.prototype.clearFilter=function(){this.getRoot().filter((function(e){return 2==e.task_type_id})),r.a.setCursor(null)},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t),t.default={template:"Start page"}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"toolbar",elements:[searchField,treeCopyControlPanel]}},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(4);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"list",minHeight:120,hidden:!0,layout:"x",template:"{common.is_show()} #dev_type#",type:{is_show:function(e){return e.is_show?"<span class='check webix_icon wxi-checkbox-marked'></span>":"<span class='check webix_icon wxi-checkbox-blank'></span>"}},onClick:{check:function(t,n){var o=e.getRoot().getItem(n);o.is_show=o.is_show?0:1,e.getRoot().updateItem(n,o),e.app.getService("tabelTable").update()}},data:[]}},t.prototype.init=function(e){r.a.waitData.then((function(){e.parse(r.a)})),this.app.setService("devFilterList",{show:function(){e.isVisible()?e.hide():e.show()}})},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(4),i=n(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"form",elements:[{name:"dev_type_id",view:"combo",labelWidth:0,options:[],invalidMessage:"Вид активности не может быть пустым",required:!0},{label:"Параметр",view:"text",name:"param"},{view:"button",label:"Сохранить",click:function(){var t=e.getRoot();if(t.validate()){console.log("all clear!!!");var n=t.getValues();if(console.log("values",n),n.id>0&&e.single)t.save();else{var o=e.app.getService("tabelTable").getSelectedId();console.log("selectedCells",o),console.log("selectedCells",o.length);var r=e.app.getService("subjectSelect").getValue(),a=format(e.app.getService("monthSelectView").getValue()),s=a.substring(0,a.length-2);if(0==o.length)return void webix.message({type:"error",text:"Не выбран день"});if(1==o.length)n.personell_id=o[0].row,n.dev_date=s+o[0].column,n.subject_id=r,n.dday=o[0].column,i.a.waitSave((function(){i.a.add(n)})).then((function(t){"success"==t.status&&(e.app.getService("tabelTable").addOneDev(i.a.getItem(t.id)),e.app.getService("developmentsList").filter())}));else{var c="";o.forEach((function(e){n.param&&n.param;c+="("+e.row+",'"+(s+e.column)+"',"+r+","+n.dev_type_id+","+n.param+"),"})),c=c.substring(0,c.length-1),webix.ajax().post("server/tabel.php?cmd=add_dev_data",{values:c,subject_id:r,start_date:a}).then((function(t){t=t.json(),i.a.parse(t),console.log("developmentsStorage",i.a.data.pull),e.app.getService("developmentsList").clearFilter(),e.app.getService("tabelTable").show()}))}}}}},{view:"button",label:"Очистить",click:function(){e.getRoot().clear()}}]}},t.prototype.init=function(e){var t=this;e.bind(i.a),e.queryView("combo").getList().sync(r.a),this.app.setService("devForm",{setValues:function(t){e.setValues(t)},clear:function(){e.clear()},setSingle:function(e){t.single=e}})},t}(o.c);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e,t=this;return{rows:[(e={view:"toolbar",css:this.app.config.shadows},e.css=this.app.config.theme,e.localId="toolbar",e.elements=[{view:"icon",icon:"wxi-angle-left",width:40,click:function(){var e=t.getRoot().queryView("datepicker"),n=e.getValue(),o=new Date(n.setMonth(n.getMonth()-1));e.setValue(o),t.app.callEvent("monthSelectView:monthChanged",[t.getFirstDay(o)])}},{css:"patients_filter",localId:"datepicker",view:"datepicker",type:"month",value:new Date,format:"%F %Y",on:{onChange:function(e){t.app.callEvent("monthSelectView:monthChanged",[t.getFirstDay(e)])}}},{view:"icon",icon:"wxi wxi-angle-right",width:40,click:function(){var e=t.getRoot().queryView("datepicker"),n=e.getValue(),o=new Date(webix.Date.add(n,1,"month"));e.setValue(o),t.app.callEvent("monthSelectView:monthChanged",[t.getFirstDay(o)])}}],e)]}},t.prototype.init=function(e){var t=this;this.app.setService("monthSelectView",{getValue:function(){return t.getFirstDay(t.getRoot().queryView("datepicker").getValue())}})},t.prototype.ready=function(e){this.app.callEvent("monthSelectView:monthChanged",[this.getFirstDay(e.queryView("datepicker").getValue())])},t.prototype.getFirstDay=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(3);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{hidden:!0,cols:[{label:"Сотрудник",labelWidth:120,view:"combo",options:[]},{view:"icon",icon:"mdi mdi-plus",click:function(){e.app.getService("tabelTable").addPersonell(e.getValue()),e.getRoot().hide()}}]}},t.prototype.init=function(e){var t=this;this.getRoot().queryView("combo").getList().parse(r.a),this.app.setService("personellSelect",{getValue:function(){return t.getValue()},show:function(){e.isVisible()?e.hide():e.show()}})},t.prototype.getValue=function(){var e=this.getRoot().queryView("combo");return{id:e.getValue(),value:e.getText()}},t}(o.c);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"richselect",label:"Объект",options:"server/tabel.php?cmd=get_subject",on:{onChange:function(t){e.app.getService("developmentsList").load(t)}}}},t.prototype.init=function(e){this.app.setService("subjectSelect",{getValue:function(){return e.getValue()}})},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1),i=n(4),a=n(3),s=n(5);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return c(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"datatable",fixedRowHeight:!1,rowLineHeight:22,rowHeight:22,css:"webix_header_border webix_data_border",columns:[],data:[],select:"cell",multiselect:!0,blockselect:!0,on:{onAfterSelect:function(t,n){n||(0^t.column)===t.column&&e.app.getService("developmentsList").showDay(t.column,t.row)},onBeforeSelect:function(e){if("value"===e.column)return!1},onSelectChange:function(){1==e.getRoot().getSelectedId(!0).length?e.app.getService("devForm").setSingle(!0):e.app.getService("devForm").setSingle(!1)}}}},t.prototype.init=function(e){var t=this;console.log("tabeltable init"),this.app.setService("tabelTable",{getSelectedId:function(){return e.getSelectedId(!0)},show:function(){console.log("DO tabelTable show"),s.a.clearAll(),r.a.data.each((function(e){var t=s.a.getItem(e.personell_id);if(t)e.dday in t?t[e.dday].push(e):t[e.dday]=[e];else{var n=webix.copy(a.a.getItem(e.personell_id)),o=s.a.add(n);(t=s.a.getItem(o))[e.dday]=[e]}})),e.clearAll(),e.parse(s.a),e.adjustRowHeight(),e.render()},update:function(){e.adjustRowHeight(),e.render()},addPersonell:function(n){if(console.log("personell",n),n.id<1)webix.message({type:"error",text:"Для начала  определитесь с персонажем"});else if(t.app.getService("subjectSelect").getValue()){var o=e.getItem(n.id);console.log("newPers",o),o?webix.message({type:"error",text:"Такой персонаж есть в этой сказке"}):(webix.dp(e).off(),e.add({id:n.id,value:n.value}),webix.dp(e).on(),e.adjustRowHeight(),e.render())}else webix.message({type:"error",text:"Для начала  определитесь с объектом"})},addOneDev:function(t){var n=e.getItem(t.personell_id);t.dday in n?n[t.dday].push(t):n[t.dday]=[t],e.adjustRowHeight(),e.render()},changeMonth:function(t){e.clearAll();for(var n=new Date(t),o=n.getMonth(),r=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],a=[{id:"value",header:"ФИО",fillspace:5,sort:"string",select:!1}],s=function(){var e=n.getDate(),t=n.getDay();a.push({id:e,header:[e,r[t]],fillspace:1,cssFormat:function(e,n,o,r){var a={};return 0!=t&&6!=t||(a["border-left"]="2px solid gray"),n[r]&&n[r].forEach((function(e){var t=i.a.getItem(e.dev_type_id);t.is_show&&t.cell_bgcolor&&(a["background-color"]=t.cell_bgcolor)})),a},template:function(e,t,n,o){var r="";return e[o.id]&&e[o.id].forEach((function(e){var t=i.a.getItem(e.dev_type_id);t.dev_type_short&&t.is_show&&(r+='<span style="'+t.font_style+'">'+t.dev_type_short+"</span> ")})),r}}),n.setDate(n.getDate()+1)};n.getMonth()==o;)s();e.config.columns=a,e.refreshColumns()},toExcel:function(){webix.toExcel(e,{filterHTML:!0})}})},t}(o.c);t.default=l},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(36),i=n(22);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{rows:[r.default,{cols:[i.default,{$subview:!0}]}]}},t.prototype.init=function(e){},t}(o.c);t.default=c},function(e,t){},function(e,t,n){"use strict";n.r(t);var o=n(0);new webix.DataCollection({});function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"richselect",label:"Клиника",labelWidth:60,options:[],on:{onChange:function(t,n){e.app.callEvent("change:clinicChoice",[t])}}}},t.prototype.init=function(e){webix.ajax("server/main.php?cmd=get_clinic").then((function(t){e.define("options",t.json()),e.refresh()})),this.app.setService("clinicChoice",{getValue:function(){return e.getValue()}})},t}(o.c);t.default=a},function(e,t,n){"use strict";n.r(t);var o=n(0),r=new webix.DataCollection;function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this;return{view:"combo",label:"Отделение",labelWidth:100,options:r,value:"0",on:{onChange:function(t){e.app.callEvent("change:medicalStructureSelect",[t]),e.app.getService("state").setUnit(r.getItem(t))}}}},t.prototype.init=function(e){var t=this;r.clearAll(),r.load("server/common.php?cmd=get_medical_structure").then((function(n){var o=t.app.getService("state").getUnit();o&&e.setValue(o.id)})),this.on(this.app,"change:structureChoice",(function(e){r.clearAll(!0),r.load(r.data.url)})),this.app.setService("medicalStructureSelect",{getValue:function(){return e.getValue()}})},t}(o.c);t.default=s},function(e,t,n){},function(e,t,n){var o={"./common/clinicChoice":63,"./common/clinicChoice.js":63,"./common/medicalStructureSelect":64,"./common/medicalStructureSelect.js":64,"./common/personellCombo":7,"./common/personellCombo.js":7,"./common/searchField":20,"./common/searchField.js":20,"./common/searchField2":48,"./common/searchField2.js":48,"./common/showArchSwitch":49,"./common/showArchSwitch.js":49,"./common/treeCopyControlPanel":21,"./common/treeCopyControlPanel.js":21,"./common/treeCopyToolbar":8,"./common/treeCopyToolbar.js":8,"./login":50,"./login.js":50,"./mainMenu":22,"./mainMenu.js":22,"./personell":13,"./personell/":13,"./personell/index":13,"./personell/index.js":13,"./personell/personellForm":24,"./personell/personellForm.js":24,"./personell/personellList":23,"./personell/personellList.js":23,"./personell/roleSelect":44,"./personell/roleSelect.js":44,"./setTask":14,"./setTask/":14,"./setTask/index":14,"./setTask/index.js":14,"./setTask/personellSelect":51,"./setTask/personellSelect.js":51,"./setTask/setTaskForm":40,"./setTask/setTaskForm.js":40,"./setTask/setTaskList":26,"./setTask/setTaskList.js":26,"./setTask/setTaskToolbar":25,"./setTask/setTaskToolbar.js":25,"./setTask/urgentlyList":52,"./setTask/urgentlyList.js":52,"./start":53,"./start.js":53,"./structureSettings":15,"./structureSettings/":15,"./structureSettings/clinicForm":43,"./structureSettings/clinicForm.js":43,"./structureSettings/formPanel":27,"./structureSettings/formPanel.js":27,"./structureSettings/index":15,"./structureSettings/index.js":15,"./structureSettings/structureForm":46,"./structureSettings/structureForm.js":46,"./structureSettings/structureTree":42,"./structureSettings/structureTree.js":42,"./tViewer":16,"./tViewer/":16,"./tViewer/developmentsList":28,"./tViewer/developmentsList.js":28,"./tViewer/index":16,"./tViewer/index.js":16,"./tabel":17,"./tabel/":17,"./tabel/devFilterList":9,"./tabel/devFilterList.js":9,"./tabel/devForm":30,"./tabel/devForm.js":30,"./tabel/developmentsList":31,"./tabel/developmentsList.js":31,"./tabel/index":17,"./tabel/index.js":17,"./tabel/monthSelectView":10,"./tabel/monthSelectView.js":10,"./tabel/personellSelect":29,"./tabel/personellSelect.js":29,"./tabel/subjectSelect":11,"./tabel/subjectSelect.js":11,"./tabel/tabelTable":12,"./tabel/tabelTable.js":12,"./tasker":18,"./tasker/":18,"./tasker/constantlyLToolbar":54,"./tasker/constantlyLToolbar.js":54,"./tasker/constantlyList":33,"./tasker/constantlyList.js":33,"./tasker/devFilterList":55,"./tasker/devFilterList.js":55,"./tasker/devForm":56,"./tasker/devForm.js":56,"./tasker/index":18,"./tasker/index.js":18,"./tasker/informingList":35,"./tasker/informingList.js":35,"./tasker/monthSelectView":57,"./tasker/monthSelectView.js":57,"./tasker/personellSelect":58,"./tasker/personellSelect.js":58,"./tasker/subjectSelect":59,"./tasker/subjectSelect.js":59,"./tasker/tabelTable":60,"./tasker/tabelTable.js":60,"./tasker/taskerToolbar":32,"./tasker/taskerToolbar.js":32,"./tasker/urgentlyList":34,"./tasker/urgentlyList.js":34,"./top":61,"./top.js":61,"./unitSettings":19,"./unitSettings/":19,"./unitSettings/formPanel":39,"./unitSettings/formPanel.js":39,"./unitSettings/index":19,"./unitSettings/index.js":19,"./unitSettings/unitForm":45,"./unitSettings/unitForm.js":45,"./unitSettings/unitTree":41,"./unitSettings/unitTree.js":41,"./user/profilemenu":37,"./user/profilemenu.js":37,"./user/themesettings":38,"./user/themesettings.js":38,"./user/toolbar":36,"./user/toolbar.js":36};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=66},function(e,t){webix.protoUI({name:"photo",$allowsClear:!0,defaults:{width:260,height:260},$init:function(e){var t=this;e.value&&webix.delay((function(){return t.setValue(e.value)}))},getValue:function(){return this.config.value},setValue:function(e){console.log("photos value",e);var t,n;t=n=this.config.height,e?this.setHTML('<img style="height:'+t+"px;width:"+n+'px;" src="data/photos/'+e+'" />'):this.setHTML(""),this.config.value=e}},webix.ui.template)},function(e,t,n){var o={"./en":62,"./en.js":62};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=68},function(e,t,n){"use strict";n.r(t);n(65);var o=n(0),r=n(47);function i(e){e.setService("client",{getClient:function(){return this.client},setClient:function(e){this.client=e},client:null})}function a(e){e.setService("state",{getClient:function(){return this.client},getClientId:function(){return this.client?this.client.client_id:null},setClient:function(e){this.client=e},client:null,getUnit:function(){return this.unit},setUnit:function(e){this.unit=e},unit:null})}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};webix.i18n.setLocale("ru-RU"),webix.Date.startOnMonday=!0;var c=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var c=function(){var e=document.body.offsetWidth;return e>1415?"wide":e>1200?"mid":"small"},u={id:"domrf",name:"ДОМ.РФ",version:"1.1.0",router:o.a,debug:!1,start:"/top/start",theme:"",shadows:"",size:c()},l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,s({},u,n)));return l.use(o.d.User,{model:r.a}),l.use(i),l.use(a),webix.event(window,"resize",(function(){var e=c();e!=l.config.size&&(l.config.size=e,l.refresh())})),l.attachEvent("app:error:resolve",(function(){var e=this;webix.delay((function(){return e.show("/login")}))})),console.log("config",n),console.log("defaults",u),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.b);t.default=c;webix.ready((function(){!webix.env.touch&&webix.env.scrollSize&&webix.CustomScroll&&webix.CustomScroll.init(),(new c).render()}))}]);